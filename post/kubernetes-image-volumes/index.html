<!doctype html>

















































<html
  class="not-ready lg:text-base"
  style="--bg: #fbfbfb"
  lang="en-us"
  dir="ltr"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>kubernetes-image-volumes - Karthikeyan Sundararajan</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="Kuberetes Image Volumes Feature in 1.33 (beta) Create kind cluster
kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 kubeadmConfigPatches: - | kind: ClusterConfiguration apiServer: extraArgs: feature-gates: &#34;ImageVolume=true&#34; controllerManager: extraArgs: feature-gates: &#34;ImageVolume=true&#34; scheduler: extraArgs: feature-gates: &#34;ImageVolume=true&#34; - | kind: KubeletConfiguration featureGates: ImageVolume: true nodes: - role: control-plane extraPortMappings: - containerPort: 30000 hostPort: 30000 kubeadmConfigPatches: - | kind: InitConfiguration nodeRegistration: kubeletExtraArgs: feature-gates: &#34;ImageVolume=true&#34; kind create cluster --config kind-imagevolume.yaml Once the cluster is up, create a pod with multiple image references as volumes," />
  <meta name="author" content="Karthikeyan Sundararajan" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://karthikeayan.github.io/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="https://karthikeayan.github.io/theme.svg" />

  
  
  
  
  <link rel="preload" as="image" href="https://avatars.githubusercontent.com/u/5030782?v=4&amp;size=64" />
  
  

  
  
  <link rel="preload" as="image" href="https://karthikeayan.github.io/twitter.svg" />
  
  <link rel="preload" as="image" href="https://karthikeayan.github.io/github.svg" />
  
  <link rel="preload" as="image" href="https://karthikeayan.github.io/instagram.svg" />
  
  <link rel="preload" as="image" href="https://karthikeayan.github.io/linkedin.svg" />
  
  <link rel="preload" as="image" href="https://karthikeayan.github.io/mastodon.svg" />
  
  <link rel="preload" as="image" href="https://karthikeayan.github.io/threads.svg" />
  
  <link rel="preload" as="image" href="https://karthikeayan.github.io/rss.svg" />
  
  

  
  

  
  
  
  
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css"
  integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI"
  crossorigin="anonymous"
/>
<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js"
  integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t"
  crossorigin="anonymous"
></script>
<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js"
  integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
  crossorigin="anonymous"
></script>


<script>
  document.addEventListener('DOMContentLoaded', () =>
    renderMathInElement(document.body, {
      
      
      delimiters: [
        { left: '$$', right: '$$', display: true },
        { left: '$', right: '$', display: false },
      ],
      
      throwOnError: false,
    }),
  );
</script>

  
  
  

  
  <link
    rel="icon"
    href="https://karthikeayan.github.io/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="https://karthikeayan.github.io/apple-touch-icon.png"
  />

  
  <meta name="generator" content="Hugo 0.119.0">

  
  
  
  
  
  <meta itemprop="name" content="kubernetes-image-volumes">
<meta itemprop="description" content="Kuberetes Image Volumes Feature in 1.33 (beta)"><meta itemprop="datePublished" content="2025-07-27T00:00:00+00:00" />
<meta itemprop="dateModified" content="2025-07-27T00:00:00+00:00" />
<meta itemprop="wordCount" content="566">
<meta itemprop="keywords" content="kubernetes,image,volumes,1.33,dynamic," />
  
  <meta property="og:title" content="kubernetes-image-volumes" />
<meta property="og:description" content="Kuberetes Image Volumes Feature in 1.33 (beta)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://karthikeayan.github.io/post/kubernetes-image-volumes/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2025-07-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2025-07-27T00:00:00+00:00" />

  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="kubernetes-image-volumes"/>
<meta name="twitter:description" content="Kuberetes Image Volumes Feature in 1.33 (beta)"/>

  
  

  
  <link rel="canonical" href="https://karthikeayan.github.io/post/kubernetes-image-volumes/" />
  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center">
  <div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center">
    <a class="-translate-y-[1px] text-2xl font-medium" href="https://karthikeayan.github.io/"
      >Karthikeyan Sundararajan</a
    >
    <div
      class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#fbfbfb'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 rtl:space-x-reverse dark:invert ltr:lg:ml-14 rtl:lg:mr-14 lg:mt-0 lg:items-center"
    >
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href="https://twitter.com/karthikeayan"
        target="_blank"
        rel="me"
      >
        twitter
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/karthikeayan"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./instagram.svg)"
        href="https://instagram.com/YOUR_INSTAGRAM_ID"
        target="_blank"
        rel="me"
      >
        instagram
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./linkedin.svg)"
        href="https://linkedin.com/in/karthikeyan-sundararajan/"
        target="_blank"
        rel="me"
      >
        linkedin
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./mastodon.svg)"
        href="YOUR_MASTODON_LINK"
        target="_blank"
        rel="me"
      >
        mastodon
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./threads.svg)"
        href="https://threads.net/@YOUR_THREADS_ID"
        target="_blank"
        rel="me"
      >
        threads
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./rss.svg)"
        href="https://karthikeayan.github.io/index.xml"
        target="_blank"
        rel="alternate"
      >
        rss
      </a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert"
    >
      

<article>
  <header class="mb-14">
    <h1 class="!my-0 pb-2.5">kubernetes-image-volumes</h1>

    
    <div class="text-xs antialiased opacity-60">
      
      <time>Jul 27, 2025</time>
      
      
      
      
    </div>
    
  </header>

  <section><h1 id="kuberetes-image-volumes-feature-in-133-beta">Kuberetes Image Volumes Feature in 1.33 (beta)</h1>
<p>Create kind cluster</p>
<pre tabindex="0"><code>kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
kubeadmConfigPatches:
  - |
    kind: ClusterConfiguration
    apiServer:
      extraArgs:
        feature-gates: &#34;ImageVolume=true&#34;
    controllerManager:
      extraArgs:
        feature-gates: &#34;ImageVolume=true&#34;
    scheduler:
      extraArgs:
        feature-gates: &#34;ImageVolume=true&#34;
  - |
    kind: KubeletConfiguration
    featureGates:
      ImageVolume: true
nodes:
  - role: control-plane
    extraPortMappings:
      - containerPort: 30000
        hostPort: 30000
    kubeadmConfigPatches:
      - |
        kind: InitConfiguration
        nodeRegistration:
          kubeletExtraArgs:
            feature-gates: &#34;ImageVolume=true&#34;
</code></pre><pre tabindex="0"><code>kind create cluster --config kind-imagevolume.yaml
</code></pre><p>Once the cluster is up, create a pod with multiple image references as volumes,</p>
<pre tabindex="0"><code># build-pod.yaml
apiVersion: v1
kind: Pod
metadata:
  name: build-pod
spec:
  containers:
  - name: shell
    command: [&#34;sleep&#34;, &#34;infinity&#34;]
    image: debian
    volumeMounts:
    - name: jdk21
      mountPath: /jdk21
      subPath: dir
    - name: python313
      mountPath: /python313
      subPath: dir
    - name: node24
      mountPath: /node24
      subPath: dir
  volumes:
  - name: jdk21
    image:
      reference: openjdk:21
      pullPolicy: IfNotPresent
  - name: python313
    image:
      reference: python:3.13
      pullPolicy: IfNotPresent
  - name: node24
    image:
      reference: node:24
      pullPolicy: IfNotPresent
</code></pre><pre tabindex="0"><code>kubectl apply -f build-pod.yaml
</code></pre><p>Here are the important lines,</p>
<pre tabindex="0"><code>  - name: jdk21
    image:
      reference: openjdk:21
      pullPolicy: IfNotPresent
</code></pre><p>We are attaching a volume but it is not a PVC or a ConfigMap or Secret. It is a container image itself.</p>
<p>Lets get into the image and see how it looks,</p>
<pre tabindex="0"><code>k exec -it build-pod -- bash
</code></pre><pre tabindex="0"><code>root@build-pod:/# df -h
overlay        1007G  7.7G  948G   1% /jdk21
overlay        1007G  7.7G  948G   1% /python313
overlay        1007G  7.7G  948G   1% /node24
</code></pre><p>Great, we can see mounts as the name we specified in the volumeMount section</p>
<p>Lets see whats inside in one of the folder,</p>
<pre tabindex="0"><code>root@build-pod:~# cd /jdk21/
root@build-pod:/jdk21# ls -l
total 60
lrwxrwxrwx 1 root root    7 Oct  9  2021 bin -&gt; usr/bin
dr-xr-xr-x 2 root root 4096 Oct  9  2021 boot
drwxr-xr-x 2 root root 4096 Oct  9  2021 dev
drwxr-xr-x 1 root root 4096 Sep 21  2023 etc
drwxr-xr-x 2 root root 4096 Oct  9  2021 home
lrwxrwxrwx 1 root root    7 Oct  9  2021 lib -&gt; usr/lib
lrwxrwxrwx 1 root root    9 Oct  9  2021 lib64 -&gt; usr/lib64
drwxr-xr-x 2 root root 4096 Oct  9  2021 media
drwxr-xr-x 2 root root 4096 Oct  9  2021 mnt
drwxr-xr-x 2 root root 4096 Oct  9  2021 opt
dr-xr-xr-x 2 root root 4096 Sep 21  2023 proc
dr-xr-x--- 1 root root 4096 Sep 21  2023 root
drwxr-xr-x 4 root root 4096 Sep 21  2023 run
lrwxrwxrwx 1 root root    8 Oct  9  2021 sbin -&gt; usr/sbin
drwxr-xr-x 2 root root 4096 Oct  9  2021 srv
dr-xr-xr-x 2 root root 4096 Sep 21  2023 sys
drwxrwxrwt 1 root root 4096 Sep 21  2023 tmp
drwxr-xr-x 1 root root 4096 Sep 21  2023 usr
drwxr-xr-x 1 root root 4096 Sep 21  2023 var
</code></pre><p>Cool, we can see the entire filesystem of the jdk21 image.</p>
<p>Lets try and see if we can really use it</p>
<pre tabindex="0"><code>root@build-pod:/jdk21# /jdk21/usr/java/openjdk-21/bin/java -version
openjdk version &#34;21&#34; 2023-09-19
OpenJDK Runtime Environment (build 21+35-2513)
OpenJDK 64-Bit Server VM (build 21+35-2513, mixed mode, sharing)
</code></pre><p>We can directly use java here. Lets see if we can use node and python</p>
<pre tabindex="0"><code>root@build-pod:/node24# /node24/usr/local/bin/node --version
v24.4.1

root@build-pod:/# /python313/usr/bin/python3 --version
/python313/usr/bin/python3: error while loading shared libraries: libexpat.so.1: cannot open shared object file: No such file or directory
</code></pre><p>node is working but python isn&rsquo;t. Looks like we need to set LD_LIBRARY_PATH for python to work,</p>
<pre tabindex="0"><code>root@build-pod:/node24# export LD_LIBRARY_PATH=/python313/usr/lib:/python313/usr/lib/x86_64-linux-gnu
root@build-pod:/node24# /python313/usr/bin/python3 --version
Python 3.11.2
</code></pre><p>Thats great. We can directly attach the images as volume and use it with this new feature.
No more 15GB or 30GB bulk images and no more struggle of maintaining the Dockerfiles.</p>
</section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="https://karthikeayan.github.io/tags/kubernetes"
      >kubernetes</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="https://karthikeayan.github.io/tags/image"
      >image</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="https://karthikeayan.github.io/tags/volumes"
      >volumes</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="https://karthikeayan.github.io/tags/1.33"
      >1.33</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="https://karthikeayan.github.io/tags/dynamic"
      >dynamic</a
    >
    
  </footer>
  

  
  

  
  

  
  
  <div class="mt-24" id="graphcomment"></div>
  <script type="text/javascript">
    var __semio__params = {
      graphcommentId: 'YOUR_GRAPH_COMMENT_ID',
      behaviour: {
        
      },
      
    };

    function __semio__onload() {
      __semio__gc_graphlogin(__semio__params);
    }

    (function () {
      var gc = document.createElement('script');
      gc.type = 'text/javascript';
      gc.async = true;
      gc.onload = __semio__onload;
      gc.defer = true;
      gc.src =
        'https://integration.graphcomment.com/gc_graphlogin.js?' + Date.now();
      (
        document.getElementsByTagName('head')[0] ||
        document.getElementsByTagName('body')[0]
      ).appendChild(gc);
    })();
  </script>
  

  


  
</article>


    </main>

    <footer
  class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"
>
  <div class="mr-auto">
  
    &copy; 2025
    <a class="link" href="https://karthikeayan.github.io/">Karthikeyan Sundararajan</a>
  
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>

  </body>
</html>
